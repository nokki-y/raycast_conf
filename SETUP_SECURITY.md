# ğŸ” ç§˜åŒ¿æƒ…å ±æ¤œçŸ¥ã‚·ã‚¹ãƒ†ãƒ  - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªã®ç§˜åŒ¿æƒ…å ±æ¤œçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## âœ¨ ç‰¹å¾´

- **npmå®Œçµ**: å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ä¸è¦ã€`npm install`ã ã‘ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†
- **ã‚¼ãƒ­è¨­å®š**: HuskyãŒè‡ªå‹•çš„ã«git hookã‚’è¨­å®š
- **è»½é‡**: Node.jsç’°å¢ƒãŒã‚ã‚Œã°å‹•ä½œ
- **é–‹ç™ºè€…ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼**: è¤‡é›‘ãªç’°å¢ƒæ§‹ç¯‰ä¸è¦

---

## ğŸ“‹ å‰ææ¡ä»¶

- Node.js 16ä»¥ä¸Š
- npmï¼ˆNode.jsã«ä»˜å±ï¼‰
- GitãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨

---

## âš¡ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆ30ç§’ï¼‰

æœ€é€Ÿã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã¾ãŸã¯ç§»å‹•
cd /path/to/raycast_conf

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã“ã‚Œã ã‘ï¼ï¼‰
npm install

# å®Œäº†ï¼
```

ã“ã‚Œã§ã€æ¬¡å›ã®ã‚³ãƒŸãƒƒãƒˆæ™‚ã‹ã‚‰è‡ªå‹•çš„ã«ç§˜åŒ¿æƒ…å ±ãŒã‚¹ã‚­ãƒ£ãƒ³ã•ã‚Œã¾ã™ã€‚

---

## ğŸ¯ ä½•ãŒè‡ªå‹•çš„ã«è¨­å®šã•ã‚Œã‚‹ã‹

`npm install`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ãŒè‡ªå‹•çš„ã«è¨­å®šã•ã‚Œã¾ã™:

1. **Secretlint** - ç§˜åŒ¿æƒ…å ±æ¤œçŸ¥ãƒ„ãƒ¼ãƒ«ï¼ˆnpm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼‰
2. **ESLint + Security Plugin** - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã®é™çš„è§£æ
3. **Husky** - Git hookã®è‡ªå‹•ç®¡ç†
4. **Pre-commit hook** - ã‚³ãƒŸãƒƒãƒˆå‰ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯

---

## ğŸ“¦ è©³ç´°ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

**å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†:**
- Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ï¼ˆ16ä»¥ä¸Šï¼‰
- npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  - `secretlint`: ç§˜åŒ¿æƒ…å ±æ¤œçŸ¥
  - `eslint`: ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
  - `eslint-plugin-security`: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
  - `husky`: Git hookç®¡ç†
- Huskyã®åˆæœŸåŒ–ï¼ˆ`npm run prepare`ãŒè‡ªå‹•å®Ÿè¡Œï¼‰
- Git hookã®è‡ªå‹•è¨­å®š

**æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹:**
```
âœ… Node.js v20.x.x
âœ… npm 10.x.x
âœ… Gitãƒªãƒã‚¸ãƒˆãƒªã‚’æ¤œå‡º

âœ¨ ç’°å¢ƒãƒã‚§ãƒƒã‚¯å®Œäº†ï¼npm installã‚’ç¶šè¡Œã—ã¾ã™...

added 150 packages in 10s
```

---

### ã‚¹ãƒ†ãƒƒãƒ—2: å‹•ä½œç¢ºèª

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å‹•ä½œç¢ºèª:

```bash
# ç§˜åŒ¿æƒ…å ±ãƒã‚§ãƒƒã‚¯
npm run security:secrets

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªãƒ³ãƒˆãƒã‚§ãƒƒã‚¯
npm run security:lint

# ä¸¡æ–¹ã‚’å®Ÿè¡Œ
npm run security:check
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœ:**
```
> secretlint "**/*"

âœ” No problems found
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆ: ç§˜åŒ¿æƒ…å ±ãŒæ¤œçŸ¥ã•ã‚Œã‚‹ã‹ç¢ºèª

### ãƒ†ã‚¹ãƒˆ1: ãƒ€ãƒŸãƒ¼ã®ç§˜åŒ¿æƒ…å ±ã‚’ã‚³ãƒŸãƒƒãƒˆ

```bash
# ãƒ†ã‚¹ãƒˆç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
echo "AWS_SECRET_KEY=AKIAIOSFODNN7EXAMPLE" > test_secret.txt

# ã‚³ãƒŸãƒƒãƒˆã‚’è©¦ã¿ã‚‹
git add test_secret.txt
git commit -m "Test secret detection"
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœ:**
ã‚³ãƒŸãƒƒãƒˆãŒ**ãƒ–ãƒ­ãƒƒã‚¯**ã•ã‚Œã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™:

```
> secretlint "**/*"

test_secret.txt
  1:1  error  [CENSORED] found AWS Access Key ID  @secretlint/secretlint-rule-aws

âœ– 1 problem (1 error, 0 warnings)
```

### ãƒ†ã‚¹ãƒˆ2: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
rm test_secret.txt
git reset HEAD test_secret.txt
```

---

## ğŸ› ï¸ åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯

```bash
# ç§˜åŒ¿æƒ…å ±ã®ã¿ãƒã‚§ãƒƒã‚¯
npm run security:secrets

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªãƒ³ãƒˆã®ã¿
npm run security:lint

# ã™ã¹ã¦ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
npm run security:check

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã‚’è‡ªå‹•ä¿®æ­£ï¼ˆå¯èƒ½ãªå ´åˆï¼‰
npm run security:fix
```

### Git hookç®¡ç†

```bash
# Huskyã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆhookãŒå‹•ä½œã—ãªã„å ´åˆï¼‰
npm run prepare
```

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: `npm install`ãŒå¤±æ•—ã™ã‚‹

**åŸå› :** Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„

**è§£æ±ºç­–:**
```bash
# Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
node --version

# 16æœªæº€ã®å ´åˆã¯ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
# macOS (Homebrew)
brew upgrade node

# ã¾ãŸã¯ã€nvmã‚’ä½¿ç”¨
nvm install 20
nvm use 20
```

---

### å•é¡Œ2: Git hookãŒå‹•ä½œã—ãªã„

**åŸå› :** HuskyãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–:**
```bash
# Huskyã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm run prepare

# .husky/pre-commitãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
ls -la .husky/

# æ¨©é™ã‚’ç¢ºèª
chmod +x .husky/pre-commit
```

---

### å•é¡Œ3: ã‚³ãƒŸãƒƒãƒˆæ™‚ã«ãƒã‚§ãƒƒã‚¯ãŒã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹

**åŸå› :** `--no-verify`ãƒ•ãƒ©ã‚°ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹

**è§£æ±ºç­–:**
```bash
# --no-verifyã‚’ä½¿ç”¨ã—ãªã„
git commit -m "message"

# ã©ã†ã—ã¦ã‚‚ã‚¹ã‚­ãƒƒãƒ—ãŒå¿…è¦ãªå ´åˆï¼ˆæ¨å¥¨ã—ã¾ã›ã‚“ï¼‰
git commit -m "message" --no-verify
```

---

### å•é¡Œ4: èª¤æ¤œçŸ¥ãŒå¤šã„

**åŸå› :** æ­£å½“ãªã‚³ãƒ¼ãƒ‰ãŒç§˜åŒ¿æƒ…å ±ã¨ã—ã¦æ¤œçŸ¥ã•ã‚Œã¦ã„ã‚‹

**è§£æ±ºç­–:**

[.secretlintrc.json](.secretlintrc.json)ã‚’ç·¨é›†ã—ã¦ã€é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¿½åŠ :

```json
{
  "rules": [
    {
      "id": "@secretlint/secretlint-rule-preset-recommend"
    }
  ],
  "options": {
    "ignorePaths": [
      "**/node_modules/**",
      "**/dist/**",
      "path/to/false-positive-file.js"
    ]
  }
}
```

---

### å•é¡Œ5: ESLintã‚¨ãƒ©ãƒ¼ãŒå¤šã™ãã‚‹

**åŸå› :** æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã«å¤šãã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡ŒãŒã‚ã‚‹

**è§£æ±ºç­–:**
```bash
# è‡ªå‹•ä¿®æ­£ã‚’è©¦ã™
npm run security:fix

# ãã‚Œã§ã‚‚å•é¡ŒãŒæ®‹ã‚‹å ´åˆã€.eslintrc.jsonã§ä¸€éƒ¨ã®ãƒ«ãƒ¼ãƒ«ã‚’ç·©å’Œ
# "error" ã‚’ "warn" ã«å¤‰æ›´
```

---

## ğŸ“š è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª¬æ˜

### [package.json](package.json)
npm scripts ã¨devDependencies ã®å®šç¾©

### [.secretlintrc.json](.secretlintrc.json)
ç§˜åŒ¿æƒ…å ±æ¤œçŸ¥ã®è¨­å®šï¼ˆé™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ãªã©ï¼‰

### [.eslintrc.json](.eslintrc.json)
ESLintã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«è¨­å®š

### [.husky/pre-commit](.husky/pre-commit)
ã‚³ãƒŸãƒƒãƒˆå‰ã«å®Ÿè¡Œã•ã‚Œã‚‹ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### [scripts/check-install.js](scripts/check-install.js)
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‰ã®ç’°å¢ƒãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

---

## ğŸ”„ CI/CDã¨ã®çµ±åˆ

GitHub Actionsã§è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹å ´åˆ:

```yaml
# .github/workflows/security-check.yml
name: Security Check

on: [push, pull_request]

jobs:
  security:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
      - run: npm ci
      - run: npm run security:check
```

---

## âœ… ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å®Œäº†ã—ãŸã‚‰ä»¥ä¸‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„:

- [ ] Node.js 16ä»¥ä¸ŠãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ï¼ˆ`node --version`ï¼‰
- [ ] `npm install`ãŒæˆåŠŸã—ã¦ã„ã‚‹
- [ ] `.husky/pre-commit`ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹
- [ ] `npm run security:check`ãŒå‹•ä½œã™ã‚‹
- [ ] ãƒ†ã‚¹ãƒˆã‚³ãƒŸãƒƒãƒˆã§ç§˜åŒ¿æƒ…å ±ãŒæ¤œçŸ¥ã•ã‚Œã‚‹
- [ ] é€šå¸¸ã®ã‚³ãƒŸãƒƒãƒˆãŒæ­£å¸¸ã«å®Œäº†ã™ã‚‹

---

## ğŸ“ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### é–‹ç™ºæ™‚

1. **ã‚³ãƒŸãƒƒãƒˆå‰ã«æ‰‹å‹•ãƒã‚§ãƒƒã‚¯**
   ```bash
   npm run security:check
   ```

2. **ä¿®æ­£ãŒå¿…è¦ãªå ´åˆ**
   ```bash
   npm run security:fix  # è‡ªå‹•ä¿®æ­£ã‚’è©¦ã™
   ```

3. **ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ãƒã‚§ãƒƒã‚¯**
   ```bash
   npx secretlint path/to/file.js
   ```

### ãƒãƒ¼ãƒ é–‹ç™ºæ™‚

1. **README.mdã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã‚’è¨˜è¼‰**
   ```markdown
   ## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
   npm install
   ```

2. **PRãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè¿½åŠ **
   ```markdown
   - [ ] `npm run security:check` ãŒé€šé
   ```

3. **CI/CDã§ã‚‚åŒã˜ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ**
   - ãƒ­ãƒ¼ã‚«ãƒ«ã¨CI/CDã§åŒã˜ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

### å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆ

1. [GitHub Issues](../../issues)ã§å ±å‘Š
2. ä»¥ä¸‹ã®æƒ…å ±ã‚’æ·»ä»˜:
   ```bash
   # ç’°å¢ƒæƒ…å ±
   node --version
   npm --version

   # ãƒ­ã‚°
   npm run security:check --verbose > security.log 2>&1
   ```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«é–¢ã™ã‚‹ç·Šæ€¥ã®å•é¡Œ

- ãƒªãƒã‚¸ãƒˆãƒªã‚ªãƒ¼ãƒŠãƒ¼ã«ç›´æ¥é€£çµ¡
- GitHub Security Advisoryã‚’ä½œæˆ

---

## ğŸ†š æ—§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ã¨ã®æ¯”è¼ƒ

| é …ç›® | æ—§æ–¹å¼ï¼ˆpre-commitï¼‰ | æ–°æ–¹å¼ï¼ˆnpmï¼‰ |
|------|---------------------|--------------|
| **å¿…è¦ãªãƒ„ãƒ¼ãƒ«** | Homebrew, Python, pre-commit, gitleaks, detect-secrets | Node.js ã®ã¿ |
| **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚é–“** | ç´„5åˆ† | ç´„30ç§’ |
| **ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚³ãƒãƒ³ãƒ‰** | 4ã¤ã®ã‚³ãƒãƒ³ãƒ‰ | `npm install` ã®ã¿ |
| **ç’°å¢ƒä¾å­˜** | macOS/Linux ã§æ‰‹é †ãŒç•°ãªã‚‹ | ã©ã“ã§ã‚‚åŒã˜ |
| **ãƒˆãƒ©ãƒ–ãƒ«é »åº¦** | ä¸­ã€œé«˜ | ä½ |
| **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹** | è¤‡æ•°ãƒ„ãƒ¼ãƒ«ã®ç®¡ç† | package.jsonã®ã¿ |

---

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

- [Secretlint](https://github.com/secretlint/secretlint)
- [ESLint Security Plugin](https://github.com/eslint-community/eslint-plugin-security)
- [Husky](https://typicode.github.io/husky/)
- [SECURITY.md](SECURITY.md) - è©³ç´°ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

---

**æœ€çµ‚æ›´æ–°:** 2025-11-04
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** 2.0 (npm-based)
